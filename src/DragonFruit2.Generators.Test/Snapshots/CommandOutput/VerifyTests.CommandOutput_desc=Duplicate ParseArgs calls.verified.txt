// <auto-generated />
# nullable enable

using DragonFruit2;
using DragonFruit2.Validators;
using System.CommandLine;
using System.Diagnostics.CodeAnalysis;

/// <summary>
/// Auto-generated partial class for building CLI commands for <see cref="MyArgs"/>" and creating a new MyArgs instance from a <see cref="System.CommandLine.ParseResult" />.
/// </summary>
public partial class MyArgs : ArgsRootBase<MyArgs>
{

    [SetsRequiredMembers()]
    protected MyArgs()
    {

        static bool ValueIsAvailable<T>([NotNullWhen(true)] DataValue<T>? dataValue)
        {
            return dataValue switch
            {
                null => false,
                { IsSet: true } => true,
                _ => false
            };
        }
    }

    public IEnumerable<ValidationFailure> Validate()
    {
        var failures = new List<ValidationFailure>();
        InitializeValidators();


        return failures;
    }

    private void InitializeValidators()
    {
    }

    static partial void RegisterCustomDefaults(Builder<MyArgs> builder, DefaultDataProvider<MyArgs> defaultDataProvider);

    public static ArgsBuilder<MyArgs> GetArgsBuilder(Builder<MyArgs> builder, CommandDataDefinition? parentDataDefinition, CommandDataDefinition? rootDataDefinition)
    {
        return new MyArgs.MyArgsArgsBuilder(parentDataDefinition, rootDataDefinition);
    }

    /// <summary>
    ///  This static builder supplies the CLI declaration and filling the Result and return instance.
    /// </summary>
    internal class MyArgsArgsBuilder : ArgsBuilder<MyArgs>
    {

        public MyArgsArgsBuilder(CommandDataDefinition? parentDataDefinition, CommandDataDefinition? rootDataDefinition)
            : base(new MyArgsDataDefinition(parentDataDefinition, rootDataDefinition), () => new MyArgsDataValues())
        {
        }

        public override void Initialize(Builder<MyArgs> builder)
        {
            InitializeCli(builder, builder.GetDataProvider<CliDataProvider<MyArgs>>());
            InitializeDefaults(builder, builder.GetDataProvider<DefaultDataProvider<MyArgs>>());
        }

        public override Command InitializeCli(Builder<MyArgs> builder, CliDataProvider<MyArgs>? cliDataProvider)
        {
            var cmd = new System.CommandLine.RootCommand("my")
            {
            };

            cmd.SetAction(p => { ArgsBuilderCache<MyArgs>.ActiveArgsBuilder = this; return ; });
            cliDataProvider.RootCommand = cmd;
            return cmd;
        }

        public void InitializeDefaults(Builder<MyArgs> builder, DefaultDataProvider<MyArgs>? defaultDataProvider)
        {
            if (defaultDataProvider is null) return;
            // TODO: Register defaults based on attributes, initializer, and the RegisterDefault calls
            RegisterCustomDefaults(builder, defaultDataProvider);
        }


        protected override IEnumerable<ValidationFailure> CheckRequiredValues(DataValues dataValues)
        {
            if (dataValues is not MyArgsDataValues typedDataValues)
            {
                throw new InvalidOperationException("Internal error: passed incorrect data values");
            }
            var requiredFailures = new List<ValidationFailure?>();
            return requiredFailures
                      .Where(x => x is not null)
                      .Select(x => x!);
        }
    }

    public class MyArgsDataValues : DataValues<MyArgs>
    {

        public override void SetDataValues(DataProvider<MyArgs> dataProvider)
        {
        }

        private Type argsType = typeof(MyArgs);

        protected override MyArgs CreateInstance()
        {
            return new MyArgs();        }
    }

    /// <summary>
    ///  The data definition is available to data providers and are used for initialization.
    /// </summary>
    internal class MyArgsDataDefinition : CommandDataDefinition<MyArgs>
    {

        public MyArgsDataDefinition(CommandDataDefinition? parentDataDefinition, CommandDataDefinition? rootDataDefinition)
            : base(parentDataDefinition, rootDataDefinition)
        {
            var argsType = typeof(MyArgs);
        }

    }
}
